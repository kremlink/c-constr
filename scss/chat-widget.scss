@import url('https://fonts.googleapis.com/css?family=PT+Sans:400,700&subset=cyrillic');
$path:'../images/chat-';
$color:#F28900;
$green:#23db35;

@-webkit-keyframes notif{
   0%{
     opacity:0
   }
   100%{
     opacity:1;
   }
 }
@keyframes notif{
  0%{
    opacity:0
  }
  100%{
    opacity:1;
  }
}

@-webkit-keyframes wait{
  0%{
    -webkit-transform:scale(1);
    transform:scale(1);
  }
  100%{
    -webkit-transform:scale(0.8);
    transform:scale(0.8);
  }
}
@keyframes wait{
  0%{
    -webkit-transform:scale(1);
    transform:scale(1);
  }
  100%{
    -webkit-transform:scale(0.8);
    transform:scale(0.8);
  }
}

body{
  margin:0;
  height:450px;
  position:relative;
  font:16px/19px 'PT Sans', sans-serif;
  background:linear-gradient(180deg,$color,rgba($color,0.8)),#000;
  color:$color;
  &.form{
    .step1{
      opacity:0;
      visibility:hidden;
    }
    .step2{
      opacity:1;
      visibility:visible;
    }
    .next{
      top:270px;
    }
    .next-bg{
      height:38px;
      line-height:38px;
      span{
        color:#fff;
      }
    }
  }
  &.form-sent{
    .step2{
      opacity:0;
      visibility:hidden;
    }
    .sent{
      opacity:1;
      visibility:visible;
    }
  }
  &.theme1{
    $t-c:#333;
    font-size:12px;
    &.form{
      .next{
        right:18px;
      }
      .next-bg{
        padding-left:15px;
        width:125px;
        border-radius:20px;
        &:before{
          top:12px;
        }
      }
    }
    &:not(.form){
      .next{
        right:12px;
        top:6px;
      }
      .next-bg{
        width:32px;
        height:32px;
        border-radius:16px;
      }
    }
    &.opened .toggler{
      width:20px;
      height:20px;
      right:18px;
      top:14px;
      &:before{
        content:'';
        position:absolute;
        top:50%;
        width:100%;
        height:2px;
        background:#fff;
      }
    }
    .theme1{
      display:block;
    }
    .notif{
      display:block;
    }
    .hdr{
      height:62px;
      padding:12px 0 0 120px;
    }
    .face{
      left:8px;
      top:6px;
      border-radius:20px 25px 35px 0;
      width:100px;
      height:60px;
    }
    .name{
      font-size:24px;
    }
    .job{
      font-size:16px;
    }
    .notif{
      right:18px;
      bottom:8px;
      background:#fff;
      border-radius:8px;
      padding:0 20px 0 8px;
      height:16px;
      line-height:16px;
      color:#000;
    }
    .amt{
      width:8px;
      height:8px;
      right:6px;
      top:4px;
    }
    .body{
      height:354px;
      background:#f5f5f5;
      margin:0 4px;
    }
    .msgs-wrap{
      height:288px;
    }
    .msg.me{
      text-align:right;
      .msg-inner{
        background:#ebebeb;
      }
    }
    .msg-inner{
      display:inline-block;
      padding:13px 15px 16px;
      border-radius:20px;
      background:#ffebd0;
      border:1px solid #d3d3d3;
      max-width:286px;
      line-height:18px;
      margin:0 14px;
      color:$t-c;
    }
    .msg-wait{
      margin-top:20px;
      text-align:center;
      span{
        background:#ffd18e;
        margin:0 3px 10px 3px;
        border-radius:50%;
      }
    }
    .msg-wait-msg{
      color:$t-c;
    }
    .next-wrap{
      left:14px;
      right:14px;
      bottom:18px;
      input{
        display:block;
      }
    }
    .form-item input{
      border-radius:18px;
    }
    .form-item-h{
      text-indent:11px;
    }
  }
  //---
  &.theme2{
    $t-c:#3f3f3f;
    &.form{
      .next{
        right:18px;
      }
      .next-bg{
        padding-left:17px;
        width:133px;
        border-radius:6px;
        &:before{
          top:12px;
          width:21px;
          height:21px;
          border:none;
          background: url(#{$path}theme2-ico-f.png) no-repeat;
          -webkit-transform:none;
          transform:none;
        }
        span{
          font-weight:700;
        }
      }
    }
    &:not(.form){
      .next{
        right:10px;
        bottom:8px;
        svg{
          width:22px;
          fill:currentColor;
        }
      }
      .next-bg:before{
        display:none;
      }
    }
    &.opened{
      .toggler{
        width:32px;
        height:32px;
        right:10px;
        top:2px;
        &:before{
          content:'';
          position:absolute;
          -webkit-transform:rotate(45deg);
          transform:rotate(135deg);
          top:6px;
          right:9px;
          width:10px;
          height:10px;
          border-top:2px solid #fff;
          border-right:2px solid #fff;
        }
      }
      &.has-notif .notif{
        visibility:hidden;
      }
    }
    &.has-notif .notif{
      display:block;
      visibility:visible;
      -webkit-animation:1s linear infinite alternate notif;
      animation:1s linear infinite alternate notif;
    }
    .theme2{
      display:block;
    }
    .hdr{
      height:52px;
      padding:14px 0 0 78px;
    }
    .face{
      left:10px;
      top:9px;
      width:48px;
      height:48px;
      border-radius:6px;
    }
    .name{
      font-weight:700;
      font-size:25px;
      &:after{
        content:'';
        display:inline-block;
        vertical-align:top;
        margin:-2px 0 0 3px;
      }
    }
    .notif{
      width:46px;
      height:46px;
      top:11px;
      right:16px;
      border-radius:50%;
      background:rgba(#fff, 0.2) url(#{$path}theme2-notif.png) center no-repeat;
      -webkit-transition:all .3s ease-in-out;
      transition:all .3s ease-in-out;
      opacity:0;
      visibility:hidden;
    }
    .amt{
      width:20px;
      height:20px;
      right:-4px;
      top:0;
      border-radius:50%;
      background:$green;
      font-weight:700;
      line-height:20px;
      text-align:center;
      color:#fff;
    }
    .body{
      background:rgba(#fff, 0.85);
      margin:0 10px;
      height:372px;
      border-radius:6px;
    }
    .msgs-wrap{
      height:240px;
    }
    .msg{
      margin-left:18px;
      width:210px;
      padding:8px 10px;
      border-radius:6px;
      &.me{
        margin-left:68px;
      }
    }
    .msg-inner{
      color:$t-c;
    }
    .msg-h{
      font-weight:700;
    }
    .msg-text{
      margin-top:6px;
    }
    .msg-wait{
      margin:14px 0 0 18px;
      span{
        background:#fff;
        margin:0 4px 4px 4px;
        border-radius:50%;
      }
    }
    .msg-wait-msg{
      color:$t-c;
    }
    .next-wrap{
      left:18px;
      right:18px;
      bottom:58px;
      textarea{
        display:block;
        height:66px;
      }
    }
    .form-item input{
      border-radius:6px;
    }
    .form-item-h{
      font-weight:700;
    }
  }
  //---
  &.theme3{
    $t-c:#3f3f3f;
    &.form{
      .next{
        left:18px;
      }
      .next-bg{
        padding-left:17px;
        width:114px;
        border-radius:6px;
        &:before{
          top:12px;
        }
        span{
          font-weight:700;
        }
      }
    }
    &:not(.form){
      .next{
        right:10px;
        bottom:9px;
      }
      .next-bg{
        width:32px;
        height:32px;
        border-radius:16px;
      }
    }
    &.opened{
      .toggler{
        width:32px;
        height:32px;
        right:10px;
        top:2px;
        &:before{
          content:'';
          position:absolute;
          -webkit-transform:rotate(45deg);
          transform:rotate(135deg);
          top:22px;
          right:9px;
          width:10px;
          height:10px;
          border-top:2px solid #fff;
          border-right:2px solid #fff;
        }
      }
      &.has-notif .notif{
        visibility:hidden;
      }
    }
    &.has-notif .notif{
      display:block;
      visibility:visible;
      -webkit-animation:1s linear infinite alternate notif;
      animation:1s linear infinite alternate notif;
    }
    .theme3{
      display:block;
    }
    .hdr{
      height:52px;
      padding:14px 0 0 78px;
    }
    .face{
      left:10px;
      top:8px;
      width:50px;
      height:50px;
      border-radius:50%;
    }
    .name{
      font-size:21px;
      &:after{
        content:'';
        position:absolute;
        left:48px;
        top:8px;
        border:2px solid #fff;
      }
    }
    .job{
      margin-top:2px;
    }
    .notif{
      width:46px;
      height:46px;
      top:11px;
      right:16px;
      border-radius:50%;
      background:rgba(#000, 0.2) url(#{$path}theme2-notif.png) center no-repeat;
      -webkit-transition:all .3s ease-in-out;
      transition:all .3s ease-in-out;
      opacity:0;
      visibility:hidden;
    }
    .amt{
      width:20px;
      height:20px;
      right:-4px;
      top:0;
      border-radius:50%;
      background:$green;
      font-weight:700;
      line-height:20px;
      text-align:center;
      color:#fff;
    }
    .body{
      background:#fff;
      margin:0 4px;
      height:364px;
      border-radius:6px;
    }
    .msgs-wrap{
      height:290px;
    }
    .msg{
      margin-left:38px;
      width:210px;
      padding:8px 10px;
      border-radius:6px;
      &.me{
        margin-left:62px;
      }
    }
    .msg-inner{
      color:$t-c;
    }
    .msg-h{
      font-weight:700;
    }
    .msg-text{
      margin-top:6px;
    }
    .msg-wait{
      margin-top:14px;
      text-align:center;
      span{
        background:currentColor;
        opacity:0.2;
        margin:0 4px 4px 4px;
      }
    }
    .msg-wait-msg{
      color:$t-c;
    }
    .next-wrap{
      left:26px;
      right:26px;
      bottom:12px;
      textarea{
        display:block;
        height:50px;
      }
    }
    .form-item input{
      border-radius:6px;
    }
    .form-item-h{
      text-indent:11px;
      font-weight:700;
    }
  }
  //---
  .theme1,.theme2,.theme3{
    display:none;
  }
}
.hdr{
  position:relative;
  white-space:nowrap;
}
.face{
  position:absolute;
  background:center;
}
.name{
  &:after{
    width:10px;
    height:10px;
    border-radius:50%;
    background:$green;
  }
}
.notif{
  position:absolute;
  color:transparent;
  display:none;
}
.amt{
  position:absolute;
  background:#29AF00;
  border-radius:50%;
  color:transparent;
}
.body{
  position:relative;
  overflow:hidden;
}
.info{
  position:absolute;
  font-size:13px;
  color:#9e9e9e;
  line-height:16px;
  background:url(#{$path}theme2-emblem.png) 0 center no-repeat;
  min-height:32px;
  padding:2px 32px 0 38px;
  left:18px;
  right:0;
  bottom:6px;
}
.msgs-wrap{
  overflow:hidden;
  position:relative;
}
.msgs{
  //position:absolute;
  //left:0;
  //top:0;
  height:100%;
  overflow:auto;
}
.msg-inner{
  text-align:left;
}
.msg{
  margin-top:16px;
  position:relative;
}
.msg-inner{
  position:relative;
}
.msg-bg,.msg-bd{
  position:absolute;
  left:0;
  right:0;
  top:0;
  bottom:0;
  border-radius:6px;
}
.msg-bg{
  background:#fff;
  .me &{
    background:currentColor;
    opacity:0.2;
  }
}
.msg-bd{
  border:2px solid #cdcdcd;
  .me &{
    border-color:currentColor;
  }
}
.msg-tri{
  position:absolute;
  left:-11px;
  top:3px;
  -webkit-transform:rotate(30deg);
  transform:rotate(30deg);
  .me &{
    left:auto;
    right:-11px;
    -webkit-transform:rotate(-30deg) scale(-1,1);
    transform:rotate(-30deg) scale(-1,1);
    span{
      border-bottom-color:currentColor;
      border-left-color:currentColor;
    }
  }
  span{
    width:13px;
    height:13px;
    border-bottom:2px solid #cdcdcd;
    border-left:2px solid #cdcdcd;
    -webkit-transform:skewX(-22deg);
    transform:skewX(-22deg);
    position:absolute;
    left:10px;
    background:#fff;
  }
}
.msg-wait{
  span{
    width:11px;
    height:11px;
    display:inline-block;
    -webkit-animation:.45s linear infinite alternate wait;
    animation:.45s linear infinite alternate wait;
    body.theme1 &:nth-child(1),body.theme2 &:nth-child(1),body.theme3 &:nth-child(1){
      margin-left:0;
    }
    &:nth-child(2){
      -webkit-animation-delay:.3s;
      animation-delay:.3s;
    }
    &:nth-child(3){
      -webkit-animation-delay:.6s;
      animation-delay:.6s;
      margin-right:0;
    }
  }
}
.next-wrap{
  position:absolute;
  input{
    padding:0 44px 0 10px;
    border-radius:20px;
    height:44px;
  }
  textarea{
    border-radius:6px;
    padding:5px 0 0 10px;
    line-height:20px;
    resize:none;
  }
}
input,textarea{
  background:#fff;
  border:1px solid #c5c5c5;
  -moz-box-sizing:border-box;
  box-sizing:border-box;
  width:100%;
  font:15px 'PT Sans', sans-serif;
  &.error{
    border-color:#f00;
    &::-webkit-input-placeholder{
      color:#f00;
    }
    &::-moz-placeholder{
      color:#f00;
      opacity:1;
    }
    &:-ms-input-placeholder{
      color:#f00;
    }
  }
  &:focus{
    outline:none;
  }
  &::-webkit-input-placeholder{
    color:#c6c6c6;
  }
  &::-moz-placeholder{
    color:#c6c6c6;
    opacity:1;
  }
  &:-ms-input-placeholder{
    color:#c6c6c6;
  }
}
.ta-bdr{
  position:absolute;
  left:0;
  right:0;
  top:0;
  bottom:0;
  border-radius:5px;
  border:2px solid currentColor;
  pointer-events:none;
}
.next{
  position:absolute;
  cursor:pointer;
}
.next-bg{
  background:currentColor;
  display:block;
  &:before{
    content:'';
    position:absolute;
    -webkit-transform:rotate(45deg);
    transform:rotate(45deg);
    top:10px;
    right:12px;
    width:10px;
    height:10px;
    border-top:2px solid #fff;
    border-right:2px solid #fff;
  }
}
.step1,.step2,.sent{
  position:absolute;
  left:0;
  right:0;
  top:0;
  bottom:0;
  opacity:0;
  visibility:hidden;
  -webkit-transition:all .3s ease-in-out;
  transition:all .3s ease-in-out;
}
.step1{
  opacity:1;
  visibility:visible;
}
.step2{
  &.loading:after{
    bottom:0;
  }
  &:after{
    content:'';
    position:absolute;
    left:0;
    right:0;
    top:0;
    background: url(#{$path}loader.gif) center no-repeat;
  }
}
.sent{
  font-weight:700;
  padding:20px 18px 0 18px;
  color:#000;
}
.toggler{
  cursor:pointer;
  position:absolute;
  right:0;
  top:0;
  width:100%;
  height:100%;
}
.form-item{
  display:block;
  margin:0 18px;
  padding-top:20px;
  position:relative;
  &.phone{
    &:after{
      content:'+7';
      position:absolute;
      left:11px;
      bottom:-1px;
      font-size:15px;
      color:#000;
      line-height:36px;
    }
    input{
      padding-left:26px;
    }
  }
  input{
    height:36px;
    padding-left:10px;
  }
}
.form-item-h{
  color:#000;
  display:block;
}
.form-input{
  position:relative;
  display:block;
  margin-top:6px;
}
.form-item-bd{
  border-radius:6px;
  border:2px solid currentColor;
  position:absolute;
  left:0;
  right:0;
  top:0;
  bottom:0;
  pointer-events:none;
}
.sound{
  position:absolute;
  left:0;
  top:-500px;
}